(()=>{var e={};e.id=333,e.ids=[333],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},1211:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l});var s=t(482),a=t(9108),o=t(2563),i=t.n(o),d=t(8300),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(r,n);let l=["",{children:["auth",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,970)),"/Users/frisowempe/ISA_D/frontend/src/app/auth/profile/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,7068)),"/Users/frisowempe/ISA_D/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/frisowempe/ISA_D/frontend/src/app/auth/profile/page.tsx"],u="/auth/profile/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/auth/profile/page",pathname:"/auth/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},7687:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},3357:(e,r,t)=>{Promise.resolve().then(t.bind(t,5085))},1634:(e,r,t)=>{Promise.resolve().then(t.bind(t,5774))},5774:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var s=t(2295),a=t(3729),o=t(708),i=t(5453),d=t(2374),n=t(6274),l=t(1296),c=t(4669),u=t(6700),p=t(6548);let m=d.Ry({email:d.Z_().email("Invalid email address").optional(),full_name:d.Z_().optional()}),h=d.Ry({old_password:d.Z_().min(1,"Current password is required"),new_password:d.Z_().min(8,"New password must be at least 8 characters"),confirm_password:d.Z_().min(1,"Please confirm your new password")}).refine(e=>e.new_password===e.confirm_password,{message:"Passwords don't match",path:["confirm_password"]});function x(){let{user:e,refetch:r}=(0,u.a)();(0,n.NL)();let[t,d]=(0,a.useState)("profile"),{register:x,handleSubmit:g,formState:{errors:y}}=(0,o.cI)({resolver:(0,i.F)(m),defaultValues:{email:e?.email||"",full_name:e?.full_name||""}}),{register:f,handleSubmit:b,formState:{errors:w},reset:k}=(0,o.cI)({resolver:(0,i.F)(h)}),j=(0,l.D)({mutationFn:e=>p.x.updateProfile(e),onSuccess:()=>{c.ZP.success("Profile updated successfully!"),r()},onError:e=>{c.ZP.error(e.response?.data?.detail||"Failed to update profile")}}),v=(0,l.D)({mutationFn:e=>p.x.changePassword(e.old_password,e.new_password),onSuccess:()=>{c.ZP.success("Password changed successfully!"),k()},onError:e=>{c.ZP.error(e.response?.data?.detail||"Failed to change password")}}),_=async e=>{await j.mutateAsync(e)},P=async e=>{await v.mutateAsync({old_password:e.old_password,new_password:e.new_password})};return e?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-2xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:[(0,s.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"User Profile"}),s.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400",children:"Manage your account settings and preferences."})]}),s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("nav",{className:"-mb-px flex space-x-8 px-4 sm:px-6",children:[s.jsx("button",{onClick:()=>d("profile"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"profile"===t?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Profile Information"}),s.jsx("button",{onClick:()=>d("password"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"password"===t?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Change Password"})]})}),(0,s.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:["profile"===t&&(0,s.jsxs)("form",{onSubmit:g(_),className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),s.jsx("input",{type:"text",value:e.username,disabled:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-md sm:text-sm"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Username cannot be changed"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),s.jsx("input",{...x("email"),type:"email",className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-white dark:bg-gray-800"}),y.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.email.message})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name"}),s.jsx("input",{...x("full_name"),type:"text",className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-white dark:bg-gray-800"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Role"}),s.jsx("input",{type:"text",value:e.role,disabled:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-md sm:text-sm"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:j.isPending,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:j.isPending?"Saving...":"Save Changes"})})]}),"password"===t&&(0,s.jsxs)("form",{onSubmit:b(P),className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"old_password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Current Password"}),s.jsx("input",{...f("old_password"),type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-white dark:bg-gray-800"}),w.old_password&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:w.old_password.message})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"New Password"}),s.jsx("input",{...f("new_password"),type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-white dark:bg-gray-800"}),w.new_password&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:w.new_password.message})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirm New Password"}),s.jsx("input",{...f("confirm_password"),type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-white dark:bg-gray-800"}),w.confirm_password&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:w.confirm_password.message})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:v.isPending,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:v.isPending?"Changing...":"Change Password"})})]})]})]})})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})})}},5085:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Providers:()=>l});var s=t(2295);t(3729);var a=t(6274),o=t(5849),i=t(6256),d=t(4669);let n=new(t(8503)).S({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:(e,r)=>!(r?.response?.status>=400&&r?.response?.status<500)&&e<3,refetchOnWindowFocus:!1},mutations:{retry:!1}}});function l({children:e}){return(0,s.jsxs)(a.aH,{client:n,children:[(0,s.jsxs)(i.f,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:[e,s.jsx(d.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]}),s.jsx(o.t,{initialIsOpen:!1})]})}},6700:(e,r,t)=>{"use strict";t.d(r,{a:()=>o});var s=t(5037),a=t(6548);function o(){let{data:e,isLoading:r,error:t,refetch:o}=(0,s.a)({queryKey:["currentUser"],queryFn:()=>a.x.getCurrentUser(),retry:!1,staleTime:3e5}),i=e?.role==="admin",d=e?.role==="researcher"||i;return{user:e,isLoading:r,isAuthenticated:!!e&&!t,isAdmin:i,isResearcher:d,error:t,refetch:o}}},6548:(e,r,t)=>{"use strict";t.d(r,{x:()=>i});var s=t(1934);let a=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000";class o{constructor(e=3e5){this.client=s.Z.create({baseURL:a,headers:{"Content-Type":"application/json"}}),this.cache=new Map,this.ttl=e,this.stats={hits:0,misses:0,concurrent:0},this.client.interceptors.request.use(e=>{let r=localStorage.getItem("access_token");return r&&(e.headers.Authorization=`Bearer ${r}`),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("access_token"),window.location.href="/auth/login"),Promise.reject(e)))}generateKey(e){let{method:r,url:t,params:s,data:a}=e;return`${r?.toUpperCase()||"GET"}:${t}:${JSON.stringify(s||{})}:${JSON.stringify(a||{})}`}isExpired(e){return Date.now()-e.timestamp>this.ttl}getCachedResponse(e){let r=this.cache.get(e);return r?this.isExpired(r)?(this.cache.delete(e),null):r:null}setCachedResponse(e,r,t){this.cache.set(e,{response:r,timestamp:Date.now(),promise:t})}clearExpired(){for(let[e,r]of this.cache.entries())this.isExpired(r)&&this.cache.delete(e)}async deduplicatedRequest(e){let r=this.generateKey(e),t=this.getCachedResponse(r);if(t)return t.promise?(this.stats.concurrent++,t.promise):(this.stats.hits++,t.response);this.stats.misses++;let s=this.client.request(e).then(e=>(this.setCachedResponse(r,e.data),e.data)).catch(e=>{throw this.cache.delete(r),e});return this.setCachedResponse(r,null,s),s}getDeduplicationStats(){return{...this.stats}}clearCache(){this.cache.clear()}async register(e){return this.deduplicatedRequest({method:"post",url:"/auth/register",data:e})}async login(e){return this.deduplicatedRequest({method:"post",url:"/auth/login",data:e})}async getCurrentUser(){return this.deduplicatedRequest({method:"get",url:"/auth/me"})}async updateProfile(e){return this.deduplicatedRequest({method:"put",url:"/auth/me",data:e})}async changePassword(e,r){return this.deduplicatedRequest({method:"post",url:"/auth/change-password",data:{old_password:e,new_password:r}})}async forgotPassword(e){return this.deduplicatedRequest({method:"post",url:"/auth/forgot-password",data:e})}async resetPassword(e){return this.deduplicatedRequest({method:"post",url:"/auth/reset-password",data:e})}async research(e){return this.deduplicatedRequest({method:"get",url:"/research",params:{query:e}})}async getUsers(e=0,r=100){return this.deduplicatedRequest({method:"get",url:"/admin/users",params:{skip:e,limit:r}})}async updateUserRole(e,r){return this.deduplicatedRequest({method:"put",url:`/admin/users/${e}/role`,data:{new_role:r}})}async healthCheck(){return this.deduplicatedRequest({method:"get",url:"/"})}}let i=new o},970:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>a,default:()=>i});let s=(0,t(6843).createProxy)(String.raw`/Users/frisowempe/ISA_D/frontend/src/app/auth/profile/page.tsx`),{__esModule:a,$$typeof:o}=s,i=s.default},7068:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p,metadata:()=>u});var s=t(5036),a=t(2195),o=t.n(a);t(5023);var i=t(6843);let d=(0,i.createProxy)(String.raw`/Users/frisowempe/ISA_D/frontend/src/components/providers.tsx`),{__esModule:n,$$typeof:l}=d;d.default;let c=(0,i.createProxy)(String.raw`/Users/frisowempe/ISA_D/frontend/src/components/providers.tsx#Providers`);t(2);let u={title:"ISA Research Platform",description:"Advanced research and compliance platform powered by AI agents"};function p({children:e}){return s.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:s.jsx("body",{className:o().className,children:s.jsx(c,{children:e})})})}},5023:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[802,934,37,929],()=>t(1211));module.exports=s})();