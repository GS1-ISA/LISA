(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{9316:function(e,t,r){Promise.resolve().then(r.bind(r,9432))},9432:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(7437),a=r(2265),i=r(4033),n=r(1865),d=r(8110),l=r(2160),o=r(3588),c=r(1396),u=r.n(c),m=r(5925),h=r(8222);let p=l.Ry({username:l.Z_().min(3,"Username must be at least 3 characters"),email:l.Z_().email("Invalid email address"),password:l.Z_().min(8,"Password must be at least 8 characters"),full_name:l.Z_().optional()});function g(){let e=(0,i.useRouter)(),[t,r]=(0,a.useState)(!1),{register:l,handleSubmit:c,formState:{errors:g}}=(0,n.cI)({resolver:(0,d.F)(p)}),x=(0,o.D)({mutationFn:e=>h.x.register(e),onSuccess:()=>{m.ZP.success("Registration successful! Please log in."),e.push("/auth/login")},onError:e=>{var t,r;m.ZP.error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.detail)||"Registration failed")}}),y=async e=>{r(!0);try{await x.mutateAsync(e)}finally{r(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Create your account"}),(0,s.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:["Or"," ",(0,s.jsx)(u(),{href:"/auth/login",className:"font-medium text-primary hover:text-primary/80",children:"sign in to existing account"})]})]}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:c(y),children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),(0,s.jsx)("input",{...l("username"),id:"username",type:"text",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-white dark:bg-gray-800",placeholder:"Username"}),g.username&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.username.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),(0,s.jsx)("input",{...l("email"),id:"email",type:"email",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-white dark:bg-gray-800",placeholder:"Email address"}),g.email&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.email.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name (Optional)"}),(0,s.jsx)("input",{...l("full_name"),id:"full_name",type:"text",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-white dark:bg-gray-800",placeholder:"Full name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),(0,s.jsx)("input",{...l("password"),id:"password",type:"password",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-white dark:bg-gray-800",placeholder:"Password"}),g.password&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.password.message})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:t,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Creating account...":"Create account"})})]})]})})}},8222:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});var s=r(4829);let a=r(2601).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";class i{generateKey(e){let{method:t,url:r,params:s,data:a}=e;return"".concat((null==t?void 0:t.toUpperCase())||"GET",":").concat(r,":").concat(JSON.stringify(s||{}),":").concat(JSON.stringify(a||{}))}isExpired(e){return Date.now()-e.timestamp>this.ttl}getCachedResponse(e){let t=this.cache.get(e);return t?this.isExpired(t)?(this.cache.delete(e),null):t:null}setCachedResponse(e,t,r){this.cache.set(e,{response:t,timestamp:Date.now(),promise:r})}clearExpired(){for(let[e,t]of this.cache.entries())this.isExpired(t)&&this.cache.delete(e)}async deduplicatedRequest(e){let t=this.generateKey(e),r=this.getCachedResponse(t);if(r)return r.promise?(this.stats.concurrent++,r.promise):(this.stats.hits++,r.response);this.stats.misses++;let s=this.client.request(e).then(e=>(this.setCachedResponse(t,e.data),e.data)).catch(e=>{throw this.cache.delete(t),e});return this.setCachedResponse(t,null,s),s}getDeduplicationStats(){return{...this.stats}}clearCache(){this.cache.clear()}async register(e){return this.deduplicatedRequest({method:"post",url:"/auth/register",data:e})}async login(e){return this.deduplicatedRequest({method:"post",url:"/auth/login",data:e})}async getCurrentUser(){return this.deduplicatedRequest({method:"get",url:"/auth/me"})}async updateProfile(e){return this.deduplicatedRequest({method:"put",url:"/auth/me",data:e})}async changePassword(e,t){return this.deduplicatedRequest({method:"post",url:"/auth/change-password",data:{old_password:e,new_password:t}})}async forgotPassword(e){return this.deduplicatedRequest({method:"post",url:"/auth/forgot-password",data:e})}async resetPassword(e){return this.deduplicatedRequest({method:"post",url:"/auth/reset-password",data:e})}async research(e){return this.deduplicatedRequest({method:"get",url:"/research",params:{query:e}})}async getUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return this.deduplicatedRequest({method:"get",url:"/admin/users",params:{skip:e,limit:t}})}async updateUserRole(e,t){return this.deduplicatedRequest({method:"put",url:"/admin/users/".concat(e,"/role"),data:{new_role:t}})}async healthCheck(){return this.deduplicatedRequest({method:"get",url:"/"})}constructor(e=3e5){this.client=s.Z.create({baseURL:a,headers:{"Content-Type":"application/json"}}),this.cache=new Map,this.ttl=e,this.stats={hits:0,misses:0,concurrent:0},this.client.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("access_token"),window.location.href="/auth/login"),Promise.reject(e)})}}let n=new i}},function(e){e.O(0,[517,829,251,797,971,938,744],function(){return e(e.s=9316)}),_N_E=e.O()}]);